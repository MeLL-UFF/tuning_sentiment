1) Baixar modelo do fasttext para deteccao de linguagem: lid.176.bin em https://dl.fbaipublicfiles.com/fasttext/supervised-models/lid.176.bin
2) Baixar fasttext em https://fasttext.cc/docs/en/support.html
3) Separar os tweets do corpus (gera um arquivo so com os tweets)
    cut -f 3 twitterStream-20091110-20100201-v0.1.1 > twitter_edin_text
4) Executar o detector de linguagem do fasttext (gera um arquivo com os labels).
    fasttext predict lid.176.bin twitter_edin_text > twitter_edin_text_ld_padrao
    fasttext predict-prob lid.176.bin twitter_edin_text 1 0.8 > twitter_edin_text_ld_80 #total de 29374710
    fasttext predict-prob lid.176.bin twitter_edin_text 1 0.7 > twitter_edin_text_ld_70 #total de 36282141
    fasttext predict-prob lid.176.bin twitter_edin_text 1 0.5 > twitter_edin_text_ld_50 #total de 46369875
5) Algumas linhas não puderam ser rotuladas pois nao alcançaram o percentual escolhido, por isso foi preenchida as linhas com um label fixo __label__xx
    sed -i -e 's/^$/__label__xx 0.0/' twitter_edin_text_ld_80
    sed -i -e 's/^$/__label__xx 0.0/' twitter_edin_text_ld_70
    sed -i -e 's/^$/__label__xx 0.0/' twitter_edin_text_ld_50
6) Juntar labels com tweets num unico arquivo separado por tab
    paste twitter_edin_text_ld_80 twitter_edin_text > twitter_edin_80
    paste twitter_edin_text_ld_50 twitter_edin_text > twitter_edin_50
    paste twitter_edin_text_ld_70 twitter_edin_text > twitter_edin_70
7) Extrair somente os com labels em ingles removendo os duplicados (Executar de dentro do container)

    docker container run -itd --name ricgoogleld --runtime=nvidia -e NVIDIA_VISIBLE_DEVICES=7, --rm --shm-size=1g --ulimit memlock=-1 --ulimit stack=67108864 -v /home/ricardo_moura/estudo_orientado/sentiment-embeddings/language-detector:/language-detector ricgoogleld bash

    python filter_en_pandas.py -i twitter_edin_80 -o twitter_edin_80_en > output.log &
    python filter_en_pandas.py -i twitter_edin_50 -o twitter_edin_50_en > output.log &
        44417590 após remover duplicados
    python filter_en_pandas.py -i twitter_edin_70 -o twitter_edin_70_en > output.log &

OBS: Existem tweets duplicados.
Para checar:
    sort FILE | uniq -cd

comandos auxiliares:
    grep -cvP '\S' file (para contar linhas em branco)



